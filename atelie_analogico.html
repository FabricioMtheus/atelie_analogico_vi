<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ateliê Analógico - Seu Nome</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Sanity Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@sanity/client@3.3.0/dist/sanityClient.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .gallery-image {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .gallery-image:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        }

        .modal-backdrop { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out; }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #52525b; /* zinc-600 */
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-zinc-900 text-gray-300">

    <!-- Cabeçalho e Navegação -->
    <header class="fixed top-0 left-0 w-full bg-zinc-900/80 backdrop-blur-sm z-50 border-b border-zinc-800">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold tracking-wider text-white">SEU NOME</a>
            <nav class="hidden md:flex space-x-8">
                <a href="#galeria" class="hover:text-white transition-colors duration-300">Galeria</a>
                <a href="#ia-tools" class="hover:text-white transition-colors duration-300">Ferramentas IA</a>
                <a href="#sobre" class="hover:text-white transition-colors duration-300">Sobre</a>
                <a href="#contato" class="hover:text-white transition-colors duration-300">Contato</a>
            </nav>
            <div class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </div>
        </div>
    </header>

    <main>
        <!-- Seção Principal (Hero) -->
        <section class="h-screen flex items-center justify-center text-center bg-zinc-900">
            <div class="max-w-3xl mx-auto px-6">
                <h1 class="text-4xl md:text-6xl font-bold text-white leading-tight mb-4 tracking-tighter">Ateliê Analógico</h1>
                <p class="text-lg md:text-xl text-zinc-400">Onde a luz, o tempo e a textura se encontram no filme.</p>
            </div>
        </section>

        <!-- Seção da Galeria -->
        <section id="galeria" class="py-20 md:py-32">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-white mb-12 md:mb-16">Galeria</h2>
                <!-- O CONTEÚDO DA GALERIA SERÁ INSERIDO AQUI PELO JAVASCRIPT -->
                <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                    <!-- Mensagem de carregamento -->
                    <p id="loading-message" class="col-span-full text-center text-zinc-400">Carregando fotos...</p>
                </div>
            </div>
        </section>

        <!-- Seções de Ferramentas IA, Sobre e Contato -->
        <section id="ia-tools" class="py-20 md:py-32 bg-zinc-950/50">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold text-white mb-4">Ferramentas Criativas com IA</h2>
                <p class="max-w-2xl mx-auto text-zinc-400 mb-12">
                    Use o poder do Gemini para criar textos e legendas que complementam sua arte.
                </p>
                <div class="max-w-xl mx-auto bg-zinc-900 p-8 rounded-lg border border-zinc-800">
                    <h3 class="text-2xl font-bold text-white mb-4">Gerador de Legendas Poéticas</h3>
                    <p class="text-zinc-400 mb-6">Descreva a cena, os sentimentos ou os elementos da sua foto para gerar uma legenda inspiradora.</p>
                    <textarea id="photoDescription" rows="3" class="w-full bg-zinc-800 border border-zinc-700 rounded-md p-3 text-white placeholder-zinc-500 focus:ring-2 focus:ring-zinc-600 focus:border-zinc-600 transition" placeholder="Ex: Uma mulher olhando a chuva pela janela de um café..."></textarea>
                    <button id="generateCaptionBtn" class="mt-4 w-full bg-zinc-800 text-white font-medium py-3 px-8 rounded-lg hover:bg-zinc-700 transition-colors duration-300 flex items-center justify-center space-x-2">
                        <span>✨ Gerar Legenda</span>
                    </button>
                </div>
            </div>
        </section>

        <section id="sobre" class="py-20 md:py-32">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-5 gap-12 items-center">
                    <div class="md:col-span-2">
                        <img src="https://placehold.co/500x500/18181b/e4e4e7?text=Sua+Foto" onerror="this.onerror=null;this.src='https://placehold.co/500x500/18181b/e4e4e7?text=Erro+ao+carregar';" alt="Uma foto sua" class="rounded-full w-48 h-48 md:w-full md:h-auto object-cover mx-auto md:rounded-lg">
                    </div>
                    <div class="md:col-span-3 text-center md:text-left">
                        <h2 class="text-3xl font-bold text-white mb-6">Sobre mim</h2>
                        <div id="bioContent">
                            <p class="mb-4 text-zinc-400">Olá! Sou [Seu Nome], um(a) fotógrafo(a) apaixonado(a) pela arte e pelo processo da fotografia analógica...</p>
                            <p class="text-zinc-400">Este espaço é um convite para explorar meu universo visual...</p>
                        </div>
                        <button id="generateBioBtn" class="mt-6 bg-zinc-800 text-white font-medium py-2 px-5 rounded-lg hover:bg-zinc-700 transition-colors duration-300 flex items-center justify-center md:justify-start space-x-2 mx-auto md:mx-0">
                           <span>✨ Gerar Biografia Criativa</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section id="contato" class="py-20 md:py-32 bg-zinc-950/50">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-3xl font-bold text-white mb-4">Entre em contato</h2>
                <p class="max-w-2xl mx-auto text-zinc-400 mb-8">Gostou do meu trabalho? Para perguntas, colaborações ou apenas para trocar uma ideia sobre fotografia, envie um e-mail.</p>
                <a href="mailto:seuemail@example.com" class="inline-block bg-zinc-800 text-white font-medium py-3 px-8 rounded-lg hover:bg-zinc-700 transition-colors duration-300">seuemail@example.com</a>
            </div>
        </section>
    </main>

    <footer class="border-t border-zinc-800">
        <div class="container mx-auto px-6 py-8 text-center text-zinc-500">
            <p>&copy; 2024 [Seu Nome]. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Modal para exibir resultados e loading -->
    <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 hidden modal-backdrop">
        <div class="bg-zinc-800 rounded-lg shadow-xl max-w-2xl w-full p-8 relative modal-content">
            <button id="closeModalBtn" class="absolute top-4 right-4 text-zinc-500 hover:text-white transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
    // Função principal que inicializa todo o site
    function initializeApp() {
        try {
            // --- CONFIGURAÇÃO DO SANITY ---
            const projectId = 't69e086n'; // <<< SUBSTITUA AQUI

            if (projectId === 'SEU_PROJECT_ID' || !projectId) {
                document.body.innerHTML = `
                    <div class="h-screen flex items-center justify-center text-center bg-zinc-900 text-white p-8">
                        <div>
                            <h1 class="text-3xl font-bold text-red-500 mb-4">Erro de Configuração</h1>
                            <p class="text-lg text-zinc-300">Você precisa configurar seu Sanity Project ID no arquivo HTML.</p>
                            <p class="mt-2 text-zinc-400">Abra o código, encontre a linha com <code class="bg-zinc-700 p-1 rounded">'SEU_PROJECT_ID'</code> e substitua pelo seu ID real do painel do Sanity.</p>
                        </div>
                    </div>
                `;
                return;
            }

            const sanityClient = window.SanityClient.createClient({
                projectId: projectId,
                dataset: 'production',
                apiVersion: '2022-03-07',
                useCdn: true,
            });

            // --- LÓGICA PARA BUSCAR E EXIBIR FOTOS ---
            const galleryGrid = document.getElementById('gallery-grid');
            const loadingMessage = document.getElementById('loading-message');

            const query = `*[_type == "post"] | order(_createdAt desc) {
                title,
                "imageUrl": mainImage.asset->url,
                "altText": excerpt
            }`;

            sanityClient.fetch(query).then(photos => {
                if (loadingMessage) loadingMessage.remove();

                if (photos && photos.length > 0) {
                    photos.forEach(photo => {
                        const photoElement = document.createElement('div');
                        photoElement.className = 'bg-zinc-800 rounded-lg overflow-hidden';
                        const imageElement = document.createElement('img');
                        imageElement.src = photo.imageUrl;
                        imageElement.alt = photo.altText || photo.title;
                        imageElement.className = 'w-full h-auto object-cover gallery-image';
                        imageElement.onerror = "this.onerror=null;this.src='https://placehold.co/600x800/18181b/e4e4e7?text=Erro+ao+carregar';";
                        photoElement.appendChild(imageElement);
                        galleryGrid.appendChild(photoElement);
                    });
                } else {
                    galleryGrid.innerHTML = '<p class="col-span-full text-center text-zinc-400">Nenhuma foto encontrada. Adicione algumas no seu painel do Sanity!</p>';
                }
            }).catch(error => {
                console.error('Erro ao buscar fotos do Sanity:', error);
                galleryGrid.innerHTML = `
                    <div class="col-span-full text-center text-red-400 bg-red-900/20 p-6 rounded-lg">
                        <p class="font-bold mb-2">Ocorreu um erro ao carregar a galeria.</p>
                        <p class="text-sm">Isso geralmente acontece por dois motivos:</p>
                        <ul class="text-left list-disc list-inside mt-2 text-zinc-400">
                            <li>O <strong>Project ID</strong> ('${projectId}') está incorreto.</li>
                            <li>A URL do site (<code class="bg-zinc-700 p-1 rounded">${window.location.origin}</code>) não foi adicionada aos <strong>CORS origins</strong> nas configurações da API do seu projeto Sanity.</li>
                        </ul>
                    </div>
                `;
            });

            // --- LÓGICA EXISTENTE (GEMINI API E MODAL) ---
            const generateCaptionBtn = document.getElementById('generateCaptionBtn');
            const generateBioBtn = document.getElementById('generateBioBtn');
            const photoDescription = document.getElementById('photoDescription');
            const bioContent = document.getElementById('bioContent');
            const modal = document.getElementById('resultModal');
            const modalBody = document.getElementById('modalBody');
            const closeModalBtn = document.getElementById('closeModalBtn');

            const showLoading = () => {
                modalBody.innerHTML = `<div class="flex flex-col items-center justify-center"><div class="loader mb-4"></div><p class="text-white text-lg">Gerando com Gemini...</p></div>`;
                modal.classList.remove('hidden');
            };
            const showResult = (title, content) => {
                modalBody.innerHTML = `<h3 class="text-2xl font-bold text-white mb-4">${title}</h3><div class="text-zinc-300 space-y-4 whitespace-pre-wrap">${content}</div>`;
            };
            const hideModal = () => modal.classList.add('hidden');
            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) hideModal(); });

            const callGeminiAPI = async (prompt, button) => {
                const originalButtonContent = button.innerHTML;
                button.disabled = true;
                button.innerHTML = `<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processando...`;
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ role: "user", parts: [{ text: prompt }] }] })
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    return result.candidates[0].content.parts[0].text;
                } catch (error) {
                    console.error("Erro ao chamar a API Gemini:", error);
                    return "Ocorreu um erro ao se comunicar com a IA.";
                } finally {
                    button.disabled = false;
                    button.innerHTML = originalButtonContent;
                }
            };

            generateCaptionBtn.addEventListener('click', async () => {
                const description = photoDescription.value.trim();
                if (!description) { alert("Por favor, descreva sua foto primeiro."); return; }
                showLoading();
                const prompt = `Aja como um curador de arte poético. Crie 3 opções de legendas curtas e evocativas para uma fotografia analógica com a seguinte descrição: "${description}". As legendas devem ser ideais para o Instagram. Formate a resposta com "Opção 1:", "Opção 2:", e "Opção 3:".`;
                const result = await callGeminiAPI(prompt, generateCaptionBtn);
                showResult("Sugestões de Legenda", result);
            });

            generateBioBtn.addEventListener('click', async () => {
                showLoading();
                const prompt = `Escreva uma biografia curta e poética (2 parágrafos) para um fotógrafo de filme analógico. O texto deve ser em primeira pessoa, mencionando a beleza da imperfeição e a magia do processo manual.`;
                const result = await callGeminiAPI(prompt, generateBioBtn);
                bioContent.innerHTML = `<p class="text-zinc-400">${result.replace(/\n\n/g, '</p><p class="text-zinc-400 mt-4">')}</p>`;
                showResult("Biografia Gerada", result);
            });
        
        } catch (error) {
            document.body.innerHTML = `<div class="h-screen flex items-center justify-center text-left bg-zinc-900 text-white p-8"><pre class="bg-zinc-800 p-4 rounded-lg whitespace-pre-wrap"><strong>Ocorreu um erro crítico que impediu o site de carregar:</strong>\n\n${error.stack}</pre></div>`;
            console.error(error);
        }
    }

    let sanityLoadTries = 0;
    const maxSanityLoadTries = 50; // Tenta por 5 segundos (50 * 100ms)

    function checkSanityLoaded() {
        sanityLoadTries++;
        if (window.SanityClient) {
            initializeApp();
        } else if (sanityLoadTries > maxSanityLoadTries) {
            document.body.innerHTML = `<div class="h-screen flex items-center justify-center text-center bg-zinc-900 text-white p-8"><div><h1 class="text-3xl font-bold text-red-500 mb-4">Erro Crítico de Carregamento</h1><p class="text-lg text-zinc-300">O script do Sanity (sanityClient.min.js) não conseguiu carregar.</p><p class="mt-2 text-zinc-400">Verifique sua conexão com a internet ou se há algum bloqueador de scripts (adblock) ativo.</p></div></div>`;
        } else {
            setTimeout(checkSanityLoaded, 100);
        }
    }

    checkSanityLoaded();
    
    </script>
</body>
</html>
